class w extends Map{set(e,n){return super.set(e,n),n}}class v extends WeakMap{set(e,n){return super.set(e,n),n}}/*! (c) Andrea Giammarchi - ISC */const k=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,_=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/?)>/g,j=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,B=/[\x01\x02]/g,H=(t,e,n)=>{let s=0;return t.join("").trim().replace(_,(r,c,o,a)=>{let l=c+o.replace(j,"=$2$1").trimEnd();return a.length&&(l+=n||k.test(c)?" /":"></"+c),"<"+l+">"}).replace(B,r=>r===""?"<!--"+e+s+++"-->":e+s++)},D=1,S=111,P=({firstChild:t,lastChild:e})=>{const n=document.createRange();return n.setStartAfter(t),n.setEndAfter(e),n.deleteContents(),t},W=(t,e)=>t.nodeType===S?1/e<0?e?P(t):t.lastChild:e?t.valueOf():t.firstChild:t,z=t=>{const{firstChild:e,lastChild:n}=t;if(e===n)return n||t;const{childNodes:s}=t,r=[...s];return{ELEMENT_NODE:D,nodeType:S,firstChild:e,lastChild:n,valueOf(){return s.length!==r.length&&t.append(...r),t}}},{isArray:R}=Array,q=t=>e=>{for(const n in e){const s=n==="role"?n:`aria-${n}`,r=e[n];r==null?t.removeAttribute(s):t.setAttribute(s,r)}},E=t=>t==null?t:t.valueOf(),F=(t,e)=>{let n,s=!0;const r=document.createAttributeNS(null,e);return c=>{const o=E(c);n!==o&&((n=o)==null?s||(t.removeAttributeNode(r),s=!0):(r.value=o,s&&(t.setAttributeNodeNS(r),s=!1)))}},G=(t,e,n)=>s=>{const r=!!E(s);n!==r&&((n=r)?t.setAttribute(e,""):t.removeAttribute(e))},U=({dataset:t})=>e=>{for(const n in e){const s=e[n];s==null?delete t[n]:t[n]=s}},$=(t,e)=>{let n,s,r=e.slice(2);return!(e in t)&&(s=e.toLowerCase())in t&&(r=s.slice(2)),c=>{const o=R(c)?c:[c,!1];n!==o[0]&&(n&&t.removeEventListener(r,n,o[1]),(n=o[0])&&t.addEventListener(r,n,o[1]))}},I=t=>{let e;return n=>{e!==n&&(e=n,typeof n=="function"?n(t):n.current=t)}},J=(t,e)=>e==="dataset"?U(t):n=>{t[e]=n},K=t=>{let e;return n=>{const s=E(n);e!=s&&(e=s,t.textContent=s??"")}},Q=(t,e,n,s,r)=>{const c=n.length;let o=e.length,a=c,l=0,i=0,f=null;for(;l<o||i<a;)if(o===l){const u=a<c?i?s(n[i-1],-0).nextSibling:s(n[a-i],0):r;for(;i<a;)t.insertBefore(s(n[i++],1),u)}else if(a===i)for(;l<o;)(!f||!f.has(e[l]))&&t.removeChild(s(e[l],-1)),l++;else if(e[l]===n[i])l++,i++;else if(e[o-1]===n[a-1])o--,a--;else if(e[l]===n[a-1]&&n[i]===e[o-1]){const u=s(e[--o],-1).nextSibling;t.insertBefore(s(n[i++],1),s(e[l++],-1).nextSibling),t.insertBefore(s(n[--a],1),u),e[o]=n[a]}else{if(!f){f=new Map;let u=i;for(;u<a;)f.set(n[u],u++)}if(f.has(e[l])){const u=f.get(e[l]);if(i<u&&u<a){let b=l,m=1;for(;++b<o&&b<a&&f.get(e[b])===u+m;)m++;if(m>u-i){const L=s(e[l],0);for(;i<u;)t.insertBefore(s(n[i++],1),L)}else t.replaceChild(s(n[i++],1),s(e[l++],-1))}else l++}else t.removeChild(s(e[l++],-1))}return n},{isArray:T,prototype:X}=Array,{indexOf:Y}=X,{createDocumentFragment:Z,createElement:V,createElementNS:tt,createTextNode:et,createTreeWalker:nt,importNode:st}=new Proxy({},{get:(t,e)=>document[e].bind(document)}),rt=t=>{const e=V("template");return e.innerHTML=t,e.content};let g;const ct=t=>{g||(g=tt("http://www.w3.org/2000/svg","svg")),g.innerHTML=t;const e=Z();return e.append(...g.childNodes),e},it=(t,e)=>e?ct(t):rt(t),ot=({childNodes:t},e)=>t[e],h=(t,e,n)=>Q(t.parentNode,e,n,W,t),lt=t=>{let e,n,s=[];const r=c=>{switch(typeof c){case"string":case"number":case"boolean":e!==c&&(e=c,n||(n=et("")),n.data=c,s=h(t,s,[n]));break;case"object":case"undefined":if(c==null){e!=c&&(e=c,s=h(t,s,[]));break}if(T(c)){e=c,c.length===0?s=h(t,s,[]):typeof c[0]=="object"?s=h(t,s,c):r(String(c));break}if(e!==c)if("ELEMENT_NODE"in c)e=c,s=h(t,s,c.nodeType===11?[...c.childNodes]:[c]);else{const o=c.valueOf();o!==c&&r(o)}break;case"function":r(c(t));break}};return r},ft=(t,e)=>{switch(e[0]){case"?":return G(t,e.slice(1),!1);case".":return J(t,e.slice(1));case"@":return $(t,"on"+e.slice(1));case"o":if(e[1]==="n")return $(t,e)}switch(e){case"ref":return I(t);case"aria":return q(t)}return F(t,e)};function at(t){const{type:e,path:n}=t,s=n.reduceRight(ot,this);return e==="node"?lt(s):e==="attr"?ft(s,t.name):K(s)}const A=t=>{const e=[];let{parentNode:n}=t;for(;n;)e.push(Y.call(n.childNodes,t)),t=n,{parentNode:n}=t;return e},d="isÂµ",C=new v,ut=/^(?:textarea|script|style|title|plaintext|xmp)$/,p=()=>({stack:[],entry:null,wire:null}),ht=(t,e)=>{const{content:n,updates:s}=pt(t,e);return{type:t,template:e,content:n,updates:s,wire:null}},dt=(t,e)=>{const n=t==="svg",s=H(e,d,n),r=it(s,n),c=nt(r,129),o=[],a=e.length-1;let l=0,i=`${d}${l}`;for(;l<a;){const f=c.nextNode();if(!f)throw`bad template: ${s}`;if(f.nodeType===8)f.data===i&&(o.push({type:"node",path:A(f)}),i=`${d}${++l}`);else{for(;f.hasAttribute(i);)o.push({type:"attr",path:A(f),name:f.getAttribute(i)}),f.removeAttribute(i),i=`${d}${++l}`;ut.test(f.localName)&&f.textContent.trim()===`<!--${i}-->`&&(f.textContent="",o.push({type:"text",path:A(f)}),i=`${d}${++l}`)}}return{content:r,nodes:o}},pt=(t,e)=>{const{content:n,nodes:s}=C.get(e)||C.set(e,dt(t,e)),r=st(n,!0),c=s.map(at,r);return{content:r,updates:c}},x=(t,{type:e,template:n,values:s})=>{const r=O(t,s);let{entry:c}=t;(!c||c.template!==n||c.type!==e)&&(t.entry=c=ht(e,n));const{content:o,updates:a,wire:l}=c;for(let i=0;i<r;i++)a[i](s[i]);return l||(c.wire=z(o))},O=({stack:t},e)=>{const{length:n}=e;for(let s=0;s<n;s++){const r=e[s];r instanceof y?e[s]=x(t[s]||(t[s]=p()),r):T(r)?O(t[s]||(t[s]=p()),r):t[s]=null}return n<t.length&&t.splice(n),n};class y{constructor(e,n,s){this.type=e,this.template=n,this.values=s}}const M=t=>{const e=new v,n=s=>(r,...c)=>x(s,{type:t,template:r,values:c});return Object.assign((s,...r)=>new y(t,s,r),{for(s,r){const c=e.get(s)||e.set(s,new w);return c.get(r)||c.set(r,n(p()))},node:(s,...r)=>x(p(),new y(t,s,r)).valueOf()})},N=new v,gt=(t,e)=>{const n=typeof e=="function"?e():e,s=N.get(t)||N.set(t,p()),r=n instanceof y?x(s,n):n;return r!==s.wire&&(s.wire=r,t.replaceChildren(r.valueOf())),t},xt=M("html");M("svg");export{xt as h,gt as r};
